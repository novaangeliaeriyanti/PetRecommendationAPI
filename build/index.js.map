{"version":3,"sources":["../server/index.js"],"names":["port","process","env","PORT","app","use","express","json","urlencoded","extended","req","res","next","context","models","config","URL_DOMAIN","routes","authRoute","URL_API","categoryRoute","productRoute","cartRoute","orderRoute","middleware","handleError","notFound","dropDatabaseSync","sequelize","sync","force","then","console","log","listen"],"mappings":";;;;;;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAGA;;AACA;;;;;;;;AAZA;AACA;AASA;AAIA;AACA,MAAMA,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;AAEA,MAAMC,GAAG,GAAG,uBAAZ,C,CACA;;AACAA,GAAG,CAACC,GAAJ,CAAQC,iBAAQC,IAAR,EAAR;AACAH,GAAG,CAACC,GAAJ,CAAQC,iBAAQE,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE;AAAZ,CAAnB,CAAR;AACAL,GAAG,CAACC,GAAJ,CAAQ,4BAAR,E,CACA;;AACAD,GAAG,CAACC,GAAJ,CAAQ,sBAAR,E,CACA;;AACAD,GAAG,CAACC,GAAJ,CAAQ,2BAAR,E,CACA;;AACAD,GAAG,CAACC,GAAJ,CAAQ,oBAAR,E,CAEA;;AACAD,GAAG,CAACC,GAAJ,CAAQ,OAAOK,GAAP,EAAWC,GAAX,EAAeC,IAAf,KAAuB;AAC3BF,EAAAA,GAAG,CAACG,OAAJ,GAAc;AAACC,IAAAA,MAAM,EAANA;AAAD,GAAd;AACAF,EAAAA,IAAI;AACP,CAHD;AAKA;AACA;AACA;AAGA;AAGA;;AACAR,GAAG,CAACC,GAAJ,CAAQU,gBAAOC,UAAP,GAAkB,OAA1B,EAAkCC,oBAAOC,SAAzC;AACAd,GAAG,CAACC,GAAJ,CAAQU,gBAAOI,OAAP,GAAe,WAAvB,EAAmCF,oBAAOG,aAA1C;AACAhB,GAAG,CAACC,GAAJ,CAAQU,gBAAOI,OAAP,GAAe,UAAvB,EAAkCF,oBAAOI,YAAzC;AACAjB,GAAG,CAACC,GAAJ,CAAQU,gBAAOI,OAAP,GAAe,OAAvB,EAA+BF,oBAAOK,SAAtC;AACAlB,GAAG,CAACC,GAAJ,CAAQU,gBAAOI,OAAP,GAAe,QAAvB,EAAgCF,oBAAOM,UAAvC,E,CAEA;;AACAnB,GAAG,CAACC,GAAJ,CAAQmB,oBAAWC,WAAnB;AACArB,GAAG,CAACC,GAAJ,CAAQmB,oBAAWE,QAAnB,E,CAGA;;AACA,MAAMC,gBAAgB,GAAG,KAAzB;;AAEAC,sBAAUC,IAAV,CAAe;AAACC,EAAAA,KAAK,EAAGH;AAAT,CAAf,EAA2CI,IAA3C,CAAgD,YAAU;AACtD,MAAGJ,gBAAH,EAAoB;AAChBK,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACH;;AAED7B,EAAAA,GAAG,CAAC8B,MAAJ,CAAWlC,IAAX,EAAgB,MAAI;AAChBgC,IAAAA,OAAO,CAACC,GAAR,CAAa,+BAA8BjC,IAAK,EAAhD;AACH,GAFD;AAIH,CATD;;eAaeI,G","sourcesContent":["// 1. pastikan selalu import dotenv di line pertama\r\n//import \"dotenv/config\";\r\nimport config from './config/config'\r\nimport express from \"express\";\r\nimport cors from \"cors\";\r\nimport compress from 'compression';\r\nimport cookieParser from 'cookie-parser';\r\nimport helmet from 'helmet';\r\nimport middleware  from \"./middleware/middleware\";\r\n\r\n//for access models to db\r\nimport models,{sequelize} from \"./models/init-models\";\r\nimport routes from './routes/IndexRoute'\r\n\r\n// declare port\r\nconst port = process.env.PORT || 3001;\r\n\r\nconst app = express();\r\n// parse body params and attache them to req.body\r\napp.use(express.json())\r\napp.use(express.urlencoded({ extended: true }))\r\napp.use(cookieParser())\r\n// use helmet spy bisa dikenali SEO\r\napp.use(helmet())\r\n// secure apps by setting various HTTP headers\r\napp.use(compress())\r\n// enable CORS - Cross Origin Resource Sharing\r\napp.use(cors());\r\n\r\n// load models dan simpan di req.context\r\napp.use(async (req,res,next) =>{\r\n    req.context = {models};\r\n    next();\r\n});\r\n\r\n/*  app.use(process.env.URL_DOMAIN,(req,res)=>{\r\n    res.send(\"Hello Eshopay\");\r\n});  */\r\n\r\n\r\n//auth.setMiddleware(app);\r\n\r\n\r\n// call routes\r\napp.use(config.URL_DOMAIN+\"/auth\",routes.authRoute)\r\napp.use(config.URL_API+\"/category\",routes.categoryRoute);\r\napp.use(config.URL_API+\"/product\",routes.productRoute);\r\napp.use(config.URL_API+\"/cart\",routes.cartRoute);\r\napp.use(config.URL_API+\"/order\",routes.orderRoute);\r\n\r\n//use middleware to handle error from others modules\r\napp.use(middleware.handleError);\r\napp.use(middleware.notFound);\r\n\r\n\r\n// set to false agar tidak di drop tables yang ada didatabase\r\nconst dropDatabaseSync = false;\r\n\r\nsequelize.sync({force : dropDatabaseSync}).then(async ()=>{\r\n    if(dropDatabaseSync){\r\n        console.log(\"Database do not drop\");\r\n    }\r\n\r\n    app.listen(port,()=>{\r\n        console.log(`Server is listening on port ${port}`)\r\n    });\r\n\r\n})\r\n\r\n\r\n\r\nexport default app;"],"file":"index.js"}